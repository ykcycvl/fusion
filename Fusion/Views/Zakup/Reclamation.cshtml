@model Fusion.Models.ZakupModel
@{
    ViewBag.Title = "Reclamation";
    Layout = "~/Views/Shared/_LayoutWide.cshtml";
}
<div class="panel panel-yellow">
    <div class="panel-heading">
        <h3 class="panel-title">
            Список рекламации
        </h3>
    </div>
    <div class="panel-body">
@using (Html.BeginForm("Reclamation", "Zakup", FormMethod.Post, new { id = "Form" }))
{
    <input type="submit" value="Сохранить" class="btn btn-success"/>
    @Html.ActionLink("Добавить рекламацию", "addReclamation", null, new { @class="btn btn-primary" })
    /*@Html.ActionLink("123", "getReclamationWord", new {id = 1 })*/
    <table class="table table-bordered table-striped">
        <thead>
            <tr class="info">
                <th style="display:none">id</th>
                <th>Дата</th>
                <th>Ресторан</th>
                <th>Поставщик</th>
                <th>Номенклатура</th>
                <th>Проблема</th>
                <th>Решение</th>
                <td>image</td>
                <th>Примечание</th>
                <th>Статус</th>
                <th>Даунлоад</th>
            </tr>
        </thead>
        <tbody>
            @for (int i = 0; i < Model.reclamations.Count(); i++)
            {
                string backgroundcolor = "";
                string color = "";
                switch (Model.reclamations[i].state_id)
                {
                    case 1:
                        backgroundcolor = "white";
                        color = "black";
                        break;
                    case 2:
                        backgroundcolor = "#fb541e";
                        color = "white";
                        break;
                    case 3:
                        backgroundcolor = "#669966";
                        color = "white";
                        break;
                    case 4:
                        backgroundcolor = "#337ab7";
                        color = "white";
                        break;
                    default: break;
                }
                Model.stateName = Model.reclamations[i].bd_states.name;
                <tr style="color: @color; background-color: @backgroundcolor">
                    <td style="display:none">@Html.HiddenFor(m => Model.reclamations[i].id)</td>
                    <td>
                        @Html.DisplayFor(m => Model.reclamations[i].date, new { @type = "date", @Value = Model.reclamations[i].date.ToString("yyy-mm-dd"), @class = "form-control" })
                    </td>
                    <td>@Model.reclamations[i].bd_subdivision.name</td>
                    <td>@Model.reclamations[i].bd_vendor.name</td>
                    <td>@Model.reclamations[i].bd_nomenclature.name</td>
                    <td>@Model.reclamations[i].bd_reclamation_problems.problem</td>
                    <td>@Html.TextAreaFor(m => Model.reclamations[i].solution, new { @class = "form-control" })</td>
                    <td><img style="max-width: 200px; max-height: 200px" src="~/Files/@Model.reclamations[i].filePath" /></td>
                    <td>@Html.TextAreaFor(m => m.reclamations[i].comment, new { @class="form-control" })</td>
                    <td>@Html.DropDownListFor(m => m.reclamations[i].state_id, Model.stateSelectList, new { @class="form-control" })</td>
                    <td>@Html.ActionLink("Скачать", "ReclamationExport", new { reclamation_id = Model.reclamations[i].id }, new { @class="btn btn-primary" })</td>
                </tr>
                }
        </tbody>
    </table>
}
    </div>
</div>
